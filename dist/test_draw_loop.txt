_pickcolor {
  a = RND(3);
  IF a = 0 THEN col = "red";
  ENDIF;
  IF a = 1 THEN col = "cyan";
  ENDIF;
  IF a = 2 THEN col = "blue";
  ENDIF;
  IF a = 3 THEN col = "purple";
  ENDIF;
}

main {
  phase = 0;
  timer = 0;
  col = "";
  GOSUB _pickcolor;
}

update {
  DRAWRECT(0, 0, SCREEN_W, SCREEN_H, col);
  FOR i = 0 TO 10
    angle = phase + i * 36;
    y = SCREEN_H/2 + 80 * SIN(DTR(angle));
    DRAWCIRCLE(i * 48 + 24, y, 20, "yellow");
  FEND;
  phase = (phase + 8) % 360;
  
  timer = timer + 1;
  
  IF timer = 30 THEN 
    timer = 0;
    GOSUB _pickcolor;
  ENDIF;
}