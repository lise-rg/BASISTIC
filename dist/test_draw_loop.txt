_pickcolor {
  a = rnd(3);
  if a = 0 then col = "red";
  endif;
  if a = 1 then col = "cyan";
  endif;
  if a = 2 then col = "blue";
  endif;
  if a = 3 then col = "purple";
  endif;
}

main {
  phase = 0;
  timer = 0;
  col = "";
  gosub _pickcolor;
}

update {
  drawrect(0, 0, SCREEN_W, SCREEN_H, col);
  for i = 0 to 10
    angle = phase + i * 36;
    y = SCREEN_H/2 + 80 * sin(dtr(angle));
    drawcircle(i * 48 + 24, y, 20, "yellow");
  fend;
  phase = (phase + 8) % 360;
  
  timer = timer + 1;
  
  if timer = 30 then 
    timer = 0;
    gosub _pickcolor;
  endif;
}